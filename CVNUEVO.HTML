<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CV Suisse ATS</title>
    <style>
        body { font-family: 'Helvetica Neue', sans-serif; background-color: #FFFFFF; color: #333; margin: 0; padding: 20px; }
        .container { max-width: 800px; margin: auto; background: #F5F5F5; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { color: #A8DADC; text-align: center; }
        .section { margin-bottom: 20px; }
        input, textarea, select { width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #B3D9FF; border-radius: 4px; }
        button { background: #A8DADC; color: white; border: none; padding: 10px; cursor: pointer; border-radius: 4px; margin: 5px; }
        button:hover { background: #B3D9FF; }
        .lang-selector { position: absolute; top: 10px; right: 10px; }
        .saved-profile { background: #E0F7FA; padding: 10px; border-radius: 4px; }
        .translate-btn { background: #B3D9FF; }
    </style>
</head>
<body>
    <div class="lang-selector">
        <select id="language">
            <option value="fr">Français</option>
            <option value="en">English</option>
            <option value="de">Deutsch</option>
            <option value="it">Italiano</option>
        </select>
    </div>
    <div class="container">
        <h1 id="title">CV Suisse ATS</h1>
        <div id="profile-section" class="section">
            <h2 id="profile-title">Profil Sauvegardé</h2>
            <div class="saved-profile" id="saved-data">Aucun profil sauvegardé.</div>
            <button id="load-profile">Charger Profil</button>
        </div>
        <div id="cv-builder">
            <div class="section">
                <h2 id="personal-title">Informations Personnelles</h2>
                <input type="text" id="name" placeholder="Nom">
                <select id="canton">
                    <option value="vaud">Vaud</option>
                    <option value="valais">Valais</option>
                    <option value="geneve">Genève</option>
                    <option value="fribourg">Fribourg</option>
                    <option value="neuchatel">Neuchâtel</option>
                </select>
                <select id="permit">
                    <option value="b">Permis B</option>
                    <option value="c">Permis C</option>
                    <option value="g">Permis G</option>
                    <option value="eu">Citoyenneté Européenne (UE)</option>
                </select>
            </div>
            <div class="section">
                <h2 id="profile-cv-title">Profil</h2>
                <textarea id="profile-text" placeholder="Résumé professionnel (écris en espagnol si prefères, puis traduis)"></textarea>
                <button id="translate-profile" class="translate-btn">Traduire (ES → FR)</button>
                <button id="ai-help-profile">Aide IA</button>
            </div>
            <div class="section">
                <h2>Motivation et Disponibilité</h2>
                <textarea id="motivation" placeholder="Expliquez votre motivation (écris en espagnol si prefères, puis traduis)"></textarea>
                <button id="translate-motivation" class="translate-btn">Traduire (ES → FR)</button>
                <button id="ai-help-motivation">Aide IA</button>
            </div>
            <div class="section">
                <h2>Compétences</h2>
                <textarea id="competences" placeholder="Liste de compétences"></textarea>
            </div>
            <div class="section">
                <h2>Expériences Professionnelles</h2>
                <textarea id="experiences" placeholder="Liste d'expériences"></textarea>
            </div>
            <div class="section">
                <h2>Formation</h2>
                <textarea id="formation" placeholder="Liste de formations"></textarea>
            </div>
            <div class="section">
                <h2>Niveau de Langues</h2>
                <textarea id="langues" placeholder="Liste de langues avec niveaux (e.g., Français: B1 - En cours d'étude)"></textarea>
                <label><input type="checkbox" id="studying-french"> En cours d'étude du français</label>
            </div>
            <div class="section">
                <h2>Références</h2>
                <textarea id="references" placeholder="Liste de références"></textarea>
            </div>
            <div class="section">
                <h2 id="ats-title">Analyse ATS</h2>
                <input type="url" id="job-url" placeholder="URL de l'offre">
                <button id="analyze-ats">Analyser</button>
                <div id="ats-results"></div>
            </div>
            <button id="download-pdf">Télécharger PDF</button>
            <button id="save-cv">Sauvegarder CV</button>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
        // Detección y cambio de idioma
        const langData = {
            fr: { title: "CV Suisse ATS", profileTitle: "Profil Sauvegardé", personalTitle: "Informations Personnelles", profileCvTitle: "Profil", atsTitle: "Analyse ATS" },
            en: { title: "Swiss CV ATS", profileTitle: "Saved Profile", personalTitle: "Personal Info", profileCvTitle: "Profile", atsTitle: "ATS Analysis" },
            de: { title: "Schweizer CV ATS", profileTitle: "Gespeichertes Profil", personalTitle: "Persönliche Informationen", profileCvTitle: "Profil", atsTitle: "ATS-Analyse" },
            it: { title: "CV Svizzero ATS", profileTitle: "Profilo Salvato", personalTitle: "Informazioni Personali", profileCvTitle: "Profilo", atsTitle: "Analisi ATS" }
        };
        let currentLang = navigator.language.split('-')[0] || 'fr';
        document.getElementById('language').value = currentLang;
        function updateLang() {
            currentLang = document.getElementById('language').value;
            document.getElementById('title').textContent = langData[currentLang].title;
        }
        document.getElementById('language').addEventListener('change', updateLang);
        updateLang();

        // Cargar perfil al inicio
        loadProfile();

        function loadProfile() {
            const saved = localStorage.getItem('userProfile');
            if (saved) {
                document.getElementById('saved-data').textContent = saved;
            }
        }

        document.getElementById('load-profile').addEventListener('click', () => {
            document.getElementById('name').value = 'Exemple Nom';
            document.getElementById('profile-text').value = 'Professionnel expérimenté...';
            document.getElementById('motivation').value = 'Disponible pour un déménagement en Suisse, avec citoyenneté européenne.';
            document.getElementById('langues').value = 'Français: B1 - En cours d\'étude';
        });

        // Función de traducción (simulada)
        function translateToFrench(text) {
            // Simulación: Muestra un prompt para copiar en un AI
            const prompt = `Traduce este texto del español al francés suizo profesional y preciso (tono calmado, fiable): "${text}". Asegúrate de que suene natural para un CV.`;
            alert('Copia este prompt y pégalo en un AI como ChatGPT o Blackbox para obtener la traducción:\n\n' + prompt);
        }

        // Botones de traducción
        document.getElementById('translate-profile').addEventListener('click', () => {
            const text = document.getElementById('profile-text').value;
            translateToFrench(text);
        });

        document.getElementById('translate-motivation').addEventListener('click', () => {
            const text = document.getElementById('motivation').value;
            translateToFrench(text);
        });

        // Asistente IA para perfil
        document.getElementById('ai-help-profile').addEventListener('click', () => {
            alert('Suggestion IA: Professionnel fiable avec une approche calme et précise.');
        });

        // Asistente IA para motivation
        document.getElementById('ai-help-motivation').addEventListener('click', () => {
            alert('Suggestion IA: Attiré par les opportunités en Suisse romande, je suis disponible pour un déménagement immédiat grâce à ma citoyenneté européenne, apportant fiabilité et intégration rapide.');
        });

        // Análisis ATS
        document.getElementById('analyze-ats').addEventListener('click', () => {
            const url = document.getElementById('job-url').value;
            document.getElementById('ats-results').textContent = 'Suggestions: Ajoutez "gestion de projet" et mentionnez disponibilité pour renforcer le match.';
        });

        // Descarga PDF
        document.getElementById('download-pdf').addEventListener('click', () => {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            doc.text('CV Suisse ATS', 10, 10);
            doc.text('Nom: ' + document.getElementById('name').value, 10, 20);
            doc.text('Profil: ' + document.getElementById('profile-text').value, 10, 30);
            doc.text('Motivation: ' + document.getElementById('motivation').value, 10, 40);
            doc.text('Langues: ' + document.getElementById('langues').value, 10, 50);
            // Agrega más...
            doc.save('cv.pdf');
        });

        // Guardar CV
        document.getElementById('save-cv').addEventListener('click', () => {
            const studyingFrench = document.getElementById('studying-french').checked ? ' (En cours d\'étude)' : '';
            const cvData = {
                name: document.getElementById('name').value,
                profile: document.getElementById('profile-text').value,
                motivation: document.getElementById('motivation').value,
                competences: document.getElementById('competences').value,
                experiences: document.getElementById('experiences').value,
                formation: document.getElementById('formation').value,
                langues: document.getElementById('langues').value + studyingFrench,
                references: document.getElementById('references').value
            };
            localStorage.setItem('savedCV', JSON.stringify(cvData));
            alert('CV sauvegardé!');
        });
    </script>
</body>
</html>
