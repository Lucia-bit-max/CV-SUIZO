<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CV Suisse ATS</title>
    <style>
        body { font-family: 'Helvetica Neue', sans-serif; background-color: #FFFFFF; color: #333; margin: 0; padding: 20px; }
        .container { max-width: 800px; margin: auto; background: #F5F5F5; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { color: #A8DADC; text-align: center; }
        .section { margin-bottom: 20px; }
        input, textarea, select { width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #B3D9FF; border-radius: 4px; }
        button { background: #A8DADC; color: white; border: none; padding: 10px; cursor: pointer; border-radius: 4px; }
        button:hover { background: #B3D9FF; }
        .lang-selector { position: absolute; top: 10px; right: 10px; }
        .saved-profile { background: #E0F7FA; padding: 10px; border-radius: 4px; }
    </style>
</head>
<body>
    <div class="lang-selector">
        <select id="language">
            <option value="fr">Français</option>
            <option value="en">English</option>
            <option value="de">Deutsch</option>
            <option value="it">Italiano</option>
        </select>
    </div>
    <div class="container">
        <h1 id="title">CV Suisse ATS</h1>
        <div id="login-section" class="section">
            <h2 id="login-title">Connexion</h2>
            <input type="email" id="email" placeholder="Email">
            <button id="login-btn">Se connecter</button>
            <p>Ou via LinkedIn (simulé)</p>
        </div>
        <div id="profile-section" class="section" style="display:none;">
            <h2 id="profile-title">Profil Sauvegardé</h2>
            <div class="saved-profile" id="saved-data">Aucun profil sauvegardé.</div>
            <button id="load-profile">Charger Profil</button>
        </div>
        <div id="cv-builder" style="display:none;">
            <div class="section">
                <h2 id="personal-title">Informations Personnelles</h2>
                <input type="text" id="name" placeholder="Nom">
                <select id="canton">
                    <option value="vaud">Vaud</option>
                    <option value="valais">Valais</option>
                    <option value="geneve">Genève</option>
                    <option value="fribourg">Fribourg</option>
                    <option value="neuchatel">Neuchâtel</option>
                </select>
                <select id="permit">
                    <option value="b">Permis B</option>
                    <option value="c">Permis C</option>
                    <option value="g">Permis G</option>
                </select>
            </div>
            <div class="section">
                <h2 id="profile-cv-title">Profil</h2>
                <textarea id="profile-text" placeholder="Résumé professionnel"></textarea>
                <button id="ai-help-profile">Aide IA</button>
            </div>
            <!-- Otras secciones similares: Competences, Experiences, Formation, Idiomas, References -->
            <div class="section">
                <h2 id="ats-title">Analyse ATS</h2>
                <input type="url" id="job-url" placeholder="URL de l'offre">
                <button id="analyze-ats">Analyser</button>
                <div id="ats-results"></div>
            </div>
            <button id="download-pdf">Télécharger PDF</button>
            <button id="save-cv">Sauvegarder CV</button>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
        // Detección y cambio de idioma
        const langData = {
            fr: { title: "CV Suisse ATS", loginTitle: "Connexion", profileTitle: "Profil Sauvegardé", personalTitle: "Informations Personnelles", profileCvTitle: "Profil", atsTitle: "Analyse ATS" },
            en: { title: "Swiss CV ATS", loginTitle: "Login", profileTitle: "Saved Profile", personalTitle: "Personal Info", profileCvTitle: "Profile", atsTitle: "ATS Analysis" },
            de: { title: "Schweizer CV ATS", loginTitle: "Anmeldung", profileTitle: "Gespeichertes Profil", personalTitle: "Persönliche Informationen", profileCvTitle: "Profil", atsTitle: "ATS-Analyse" },
            it: { title: "CV Svizzero ATS", loginTitle: "Accesso", profileTitle: "Profilo Salvato", personalTitle: "Informazioni Personali", profileCvTitle: "Profilo", atsTitle: "Analisi ATS" }
        };
        let currentLang = navigator.language.split('-')[0] || 'fr';
        document.getElementById('language').value = currentLang;
        function updateLang() {
            currentLang = document.getElementById('language').value;
            document.getElementById('title').textContent = langData[currentLang].title;
            // Actualizar otros textos...
        }
        document.getElementById('language').addEventListener('change', updateLang);
        updateLang();

        // Login y guardado de perfil
        document.getElementById('login-btn').addEventListener('click', () => {
            const email = document.getElementById('email').value;
            if (email) {
                localStorage.setItem('userEmail', email);
                document.getElementById('login-section').style.display = 'none';
                document.getElementById('profile-section').style.display = 'block';
                document.getElementById('cv-builder').style.display = 'block';
                loadProfile();
            }
        });

        function loadProfile() {
            const saved = localStorage.getItem('userProfile');
            if (saved) {
                document.getElementById('saved-data').textContent = saved;
            }
        }

        document.getElementById('load-profile').addEventListener('click', () => {
            // Precargar datos en campos (simulado)
            document.getElementById('name').value = 'Exemple Nom';
            // ... otros campos
        });

        // Asistente IA (simulado con prompt a Grok/OpenAI)
        document.getElementById('ai-help-profile').addEventListener('click', () => {
            const prompt = `Rédige un profil professionnel en français suisse pour un CV, basé sur: ${document.getElementById('profile-text').value}`;
            // En Blackbox AI, pega esto y pide respuesta; aquí simulado
            alert('Suggestion IA: Professionnel fiable avec une approche calme et précise.');
        });

        // Análisis ATS
        document.getElementById('analyze-ats').addEventListener('click', () => {
            const url = document.getElementById('job-url').value;
            // Simulación: Analizar y sugerir
            document.getElementById('ats-results').textContent = 'Suggestions: Ajoutez "gestion de projet" pour matcher l\'offre.';
        });

        // Descarga PDF
        document.getElementById('download-pdf').addEventListener('click', () => {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            doc.text('CV Suisse ATS', 10, 10);
            // Agregar contenido...
            doc.save('cv.pdf');
        });

        // Guardar CV
        document.getElementById('save-cv').addEventListener('click', () => {
            const cvData = { name: document.getElementById('name').value, profile: document.getElementById('profile-text').value };
            localStorage.setItem('savedCV', JSON.stringify(cvData));
            alert('CV sauvegardé!');
        });
    </script>
</body>
</html>
